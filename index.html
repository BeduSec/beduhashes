<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeduHashes - Password Encryption And Recovery</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap');
        
        :root {
            --glass-bg: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: #000;
            color: #fff;
            min-height: 100vh;
            margin: 0;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        .glass {
            background: var(--glass-bg);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid var(--glass-border);
        }

        .glass-dark {
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(40px);
            border-right: 1px solid var(--glass-border);
        }

        /* Restored Animated Blobs */
        .blob {
            position: fixed;
            border-radius: 50%;
            filter: blur(90px);
            z-index: -1;
            animation: drift 20s infinite alternate ease-in-out;
            opacity: 0.15;
            pointer-events: none;
        }
        .blob-1 { width: 500px; height: 500px; background: #fff; top: -100px; left: -100px; }
        .blob-2 { width: 400px; height: 400px; background: #fff; bottom: 10%; right: -50px; animation-delay: -5s; }
        .blob-3 { width: 300px; height: 300px; background: #fff; top: 40%; left: 30%; animation-duration: 25s; opacity: 0.08; }

        @keyframes drift {
            0% { transform: translate(0, 0) scale(1); }
            100% { transform: translate(100px, 50px) scale(1.1); }
        }

        /* Sidebar Overlay */
        #sidebar {
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 100;
        }
        #sidebar.closed { transform: translateX(-100%); }
        #sidebar-overlay {
            transition: opacity 0.4s ease;
            z-index: 90;
        }

        .sidebar-btn.active {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        /* Clean Interaction - No White Backgrounds */
        .action-btn {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #fff;
            transition: all 0.2s ease;
        }
        .action-btn:hover {
            border-color: #fff;
            background: rgba(255, 255, 255, 0.05);
        }

        /* Scrollbar Logic */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.1); border-radius: 10px; }

        input, textarea {
            background: rgba(255, 255, 255, 0.04) !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
        }
        input:focus, textarea:focus {
            border-color: rgba(255, 255, 255, 0.3) !important;
        }

        /* Custom Modal Buttons - Pure White Text */
        .modal-option {
            color: #fff !important;
            opacity: 1 !important;
            font-weight: 700;
        }
    </style>
</head>
<body class="relative p-3 md:p-6 lg:p-8">

    <div class="blob blob-1"></div>
    <div class="blob blob-2"></div>
    <div class="blob blob-3"></div>

    <!-- Sidebar Overlay -->
    <div id="sidebar-overlay" class="fixed inset-0 bg-black/80 hidden opacity-0" onclick="toggleSidebar()"></div>
    
    <aside id="sidebar" class="fixed top-0 left-0 h-full w-72 md:w-80 glass-dark flex flex-col p-8 md:p-10 closed">
        <div class="flex items-center gap-4 mb-12">
            <div class="w-10 h-10 border-2 border-white rounded-full flex items-center justify-center font-extrabold text-xl italic shrink-0">B</div>
            <h1 class="text-2xl font-extrabold tracking-tighter uppercase">BeduHashes</h1>
        </div>

        <nav class="flex flex-col gap-2">
            <button onclick="nav('recovery')" id="nav-recovery" class="sidebar-btn active flex items-center gap-4 p-4 rounded-xl text-sm font-semibold text-white/40 transition-all text-left">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
                Recovery Engine
            </button>
            <button onclick="nav('generator')" id="nav-generator" class="sidebar-btn flex items-center gap-4 p-4 rounded-xl text-sm font-semibold text-white/40 transition-all text-left">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
                Hash Generator
            </button>
        </nav>

        <div class="mt-auto pt-8">
            <div class="text-[10px] font-bold uppercase tracking-[0.2em] text-white/10">BeduHashes Professional Suite</div>
        </div>
    </aside>

    <!-- App Shell -->
    <div class="flex-grow flex flex-col w-full max-w-7xl mx-auto">
        
        <!-- Header -->
        <header class="h-16 md:h-20 shrink-0 flex items-center justify-between px-4 md:px-6 glass rounded-2xl md:rounded-3xl mb-4">
            <div class="flex items-center gap-4 md:gap-6">
                <button onclick="toggleSidebar()" class="p-2 hover:bg-white/10 rounded-lg transition-all">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
                </button>
                <div class="h-6 w-px bg-white/10"></div>
                <h2 id="view-title" class="text-[10px] md:text-xs font-bold uppercase tracking-[0.2em] md:tracking-[0.3em] text-white/60">Recovery Engine</h2>
            </div>
            <div class="flex items-center gap-3">
                <div id="statusLed" class="w-2 h-2 rounded-full bg-white/10"></div>
                <span id="statusText" class="text-[10px] font-bold uppercase tracking-widest text-white/30">Idle</span>
            </div>
        </header>

        <!-- Main Content -->
        <main class="flex-grow flex flex-col overflow-hidden">
            
            <!-- View: Recovery -->
            <section id="view-recovery" class="flex flex-col lg:flex-row gap-4 h-full overflow-hidden">
                <!-- Config Pane (Locked Height) -->
                <div class="lg:w-[400px] glass rounded-[2rem] p-6 md:p-8 flex flex-col gap-6 shrink-0 h-auto lg:h-full overflow-hidden">
                    <div>
                        <h2 class="text-3xl font-extrabold tracking-tighter mb-1">Engine</h2>
                        <p class="text-[10px] uppercase tracking-widest text-white/20 font-bold">Parameters</p>
                    </div>

                    <div class="flex-grow space-y-5">
                        <div class="space-y-1">
                            <label class="text-[9px] uppercase font-bold text-white/40 px-2">Target Hash</label>
                            <input type="text" id="targetHash" class="w-full rounded-xl p-4 focus:outline-none font-mono text-xs" placeholder="Paste Hash...">
                        </div>

                        <div class="grid grid-cols-2 gap-3">
                            <div class="space-y-1">
                                <label class="text-[9px] uppercase font-bold text-white/40 px-2">Algorithm</label>
                                <button onclick="openModal('algo')" class="w-full glass rounded-xl p-4 text-left text-xs flex justify-between items-center">
                                    <span id="val-algo" class="truncate">MD5</span>
                                    <svg class="w-3 h-3 opacity-30 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                                </button>
                            </div>
                            <div class="space-y-1">
                                <label class="text-[9px] uppercase font-bold text-white/40 px-2">Source</label>
                                <button onclick="openModal('mode')" class="w-full glass rounded-xl p-4 text-left text-xs flex justify-between items-center">
                                    <span id="val-mode" class="truncate">Custom File</span>
                                    <svg class="w-3 h-3 opacity-30 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                                </button>
                            </div>
                        </div>

                        <div id="fileUploadZone" class="group relative w-full h-24 border border-dashed border-white/10 rounded-2xl flex flex-col items-center justify-center transition-all hover:border-white/20 cursor-pointer">
                            <input type="file" id="fileInput" accept=".txt" class="absolute inset-0 opacity-0 cursor-pointer z-10">
                            <span id="fileName" class="text-[9px] uppercase font-bold text-white/20 tracking-widest px-4 text-center">Attach Wordlist</span>
                        </div>

                        <div id="autoIndexZone" class="hidden space-y-1">
                            <label class="text-[9px] uppercase font-bold text-white/40 px-2">Max Length</label>
                            <input type="number" id="maxLen" value="6" class="w-full rounded-xl p-4 focus:outline-none">
                        </div>
                    </div>

                    <button id="execBtn" onclick="startSequence()" class="action-btn w-full py-5 rounded-xl font-extrabold uppercase tracking-[0.3em] text-[10px]">Execute</button>
                </div>

                <!-- Terminal Log (Allowed to Overflow) -->
                <div class="flex-grow glass rounded-[2rem] flex flex-col min-h-[300px] lg:h-full overflow-hidden relative">
                    <div class="p-6 border-b border-white/5 flex justify-between items-center shrink-0">
                        <h3 class="text-[10px] font-bold uppercase tracking-widest text-white/40">Terminal Log</h3>
                        <div class="flex gap-6 text-[9px] font-bold text-white/20 uppercase">
                            <span id="statSpeed">0 H/s</span>
                            <span id="statTested">0 Tested</span>
                        </div>
                    </div>
                    <div id="terminal" class="flex-grow p-6 md:p-10 font-mono text-xs overflow-y-auto space-y-2 text-white/40 bg-black/10">
                        <div class="italic opacity-30">System idle. Parameters required.</div>
                    </div>
                </div>
            </section>

            <!-- View: Generator -->
            <section id="view-generator" class="hidden h-full glass rounded-[2rem] p-6 md:p-12 overflow-hidden flex flex-col">
                <div class="overflow-y-auto flex-grow">
                    <div class="max-w-2xl mx-auto w-full py-8 space-y-10">
                        <div class="text-center">
                            <h2 class="text-4xl font-extrabold tracking-tighter mb-2 uppercase">Generator</h2>
                            <p class="text-[10px] uppercase font-bold tracking-[0.3em] text-white/20">Hash Construction</p>
                        </div>

                        <div class="space-y-6">
                            <div class="space-y-1">
                                <label class="text-[9px] uppercase font-bold text-white/40 px-4">Raw String</label>
                                <textarea id="rawText" oninput="doHash()" class="w-full h-40 rounded-[2rem] p-8 text-xl focus:outline-none transition-all resize-none" placeholder="Enter text..."></textarea>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <button onclick="openModal('genAlgo')" class="glass rounded-xl p-6 text-left text-sm flex justify-between items-center">
                                    <span id="val-genAlgo">SHA256</span>
                                    <svg class="w-4 h-4 opacity-30" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                                </button>
                                <button onclick="copyHash()" class="action-btn p-6 rounded-xl text-[10px] font-extrabold uppercase tracking-widest">Copy Digest</button>
                            </div>

                            <div id="copyNotice" class="text-center text-[9px] font-bold uppercase tracking-[0.2em] text-white/20 opacity-0 transition-opacity">Copied to Clipboard</div>

                            <div class="p-8 bg-white/5 rounded-[2.5rem] border border-white/5 text-center">
                                <div id="hashOutput" class="font-mono text-xs md:text-lg break-all text-white font-semibold">---</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Select Modal -->
    <div id="modalOverlay" class="hidden fixed inset-0 z-[200] flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/95 backdrop-blur-xl" onclick="closeModal()"></div>
        <div class="relative glass rounded-[2rem] w-full max-w-xs p-3 overflow-hidden shadow-2xl">
            <div id="modalContent" class="flex flex-col gap-1"></div>
        </div>
    </div>

    <script>
        const state = { view: 'recovery', algo: 'MD5', mode: 'upload', genAlgo: 'SHA256', sidebarOpen: false, isRunning: false };
        const options = { algo: ['MD5', 'SHA256'], mode: ['upload', 'rockyou', 'passwords', 'pro'], genAlgo: ['MD5', 'SHA256'] };
        const labels = { upload: 'Custom File', rockyou: 'rockyou.txt', passwords: 'passwords.txt', pro: 'Auto Index' };

        function toggleSidebar() {
            const sb = document.getElementById('sidebar');
            const ov = document.getElementById('sidebar-overlay');
            state.sidebarOpen = !state.sidebarOpen;
            if (state.sidebarOpen) {
                sb.classList.remove('closed');
                ov.classList.remove('hidden');
                setTimeout(() => ov.style.opacity = '1', 10);
            } else {
                sb.classList.add('closed');
                ov.style.opacity = '0';
                setTimeout(() => ov.classList.add('hidden'), 400);
            }
        }

        function nav(v) {
            state.view = v;
            document.querySelectorAll('.sidebar-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(`nav-${v}`).classList.add('active');
            document.getElementById('view-recovery').classList.toggle('hidden', v !== 'recovery');
            document.getElementById('view-generator').classList.toggle('hidden', v !== 'generator');
            document.getElementById('view-title').innerText = v === 'recovery' ? 'Recovery Engine' : 'Hash Generator';
            if (state.sidebarOpen) toggleSidebar();
        }

        function openModal(t) {
            const overlay = document.getElementById('modalOverlay');
            const content = document.getElementById('modalContent');
            content.innerHTML = '';
            overlay.classList.remove('hidden');
            
            options[t].forEach(o => {
                const btn = document.createElement('button');
                btn.className = "modal-option w-full p-5 text-[10px] font-bold uppercase tracking-widest text-white hover:bg-white/10 rounded-2xl text-left transition-all flex justify-between items-center";
                btn.innerHTML = `<span>${labels[o] || o}</span>`;
                if(state[t] === o) btn.innerHTML += `<div class="w-1.5 h-1.5 rounded-full bg-white shadow-[0_0_8px_white]"></div>`;
                btn.onclick = () => {
                    state[t] = o;
                    document.getElementById(`val-${t}`).innerText = labels[o] || o;
                    closeModal();
                    if(t === 'mode') updateModeUI();
                    if(t === 'genAlgo') doHash();
                };
                content.appendChild(btn);
            });
        }

        function closeModal() { document.getElementById('modalOverlay').classList.add('hidden'); }

        function updateModeUI() {
            document.getElementById('fileUploadZone').classList.toggle('hidden', state.mode === 'pro');
            document.getElementById('autoIndexZone').classList.toggle('hidden', state.mode !== 'pro');
        }

        document.getElementById('fileInput').addEventListener('change', e => {
            const f = e.target.files[0];
            const d = document.getElementById('fileName');
            if(f) d.innerText = f.name;
        });

        function log(m, type = 'info') {
            const t = document.getElementById('terminal');
            const div = document.createElement('div');
            div.className = type === 'success' ? 'text-white font-bold' : (type === 'err' ? 'text-red-500 font-bold' : '');
            div.innerHTML = `<span class="opacity-20 mr-3 text-[8px]">${new Date().toLocaleTimeString()}</span> ${m}`;
            t.appendChild(div);
            t.scrollTop = t.scrollHeight;
        }

        async function startSequence() {
            if (state.isRunning) {
                state.isRunning = false;
                return;
            }

            const target = document.getElementById('targetHash').value.trim().toLowerCase();
            if(!target) {
                log("[ERR] No target hash provided.", "err");
                return;
            }

            document.getElementById('terminal').innerHTML = '';
            state.isRunning = true;
            document.getElementById('execBtn').innerText = "STOP ENGINE";
            setPulse(true);
            log(`[INIT] Engine Start...`);
            const start = Date.now();

            if(state.mode === 'pro') {
                const max = parseInt(document.getElementById('maxLen').value);
                const chars = "abcdefghijklmnopqrstuvwxyz0123456789";
                let count = 0;
                
                const run = async (c, d) => {
                    if (!state.isRunning) return true;
                    if (d === 0) {
                        count++;
                        const res = state.algo === 'MD5' ? CryptoJS.MD5(c).toString() : CryptoJS.SHA256(c).toString();
                        if (res === target) { log(`[FOUND] Password: ${c}`, 'success'); return true; }
                        if (count % 15000 === 0) { updateStats(count, start); await new Promise(r => setTimeout(r, 0)); }
                        return false;
                    }
                    for (let i = 0; i < chars.length; i++) if (await run(c + chars[i], d - 1)) return true;
                };

                for (let l = 1; l <= max; l++) { 
                    if (!state.isRunning) break;
                    log(`[SCAN] Depth ${l}`); 
                    if (await run("", l)) break; 
                }
                if (state.isRunning) log('[FAIL] Space Exhausted.', 'err');
                
            } else {
                // DICTIONARY MODE
                const fileInput = document.getElementById('fileInput');
                if (!fileInput.files.length) {
                    log("[ERR] No wordlist file attached.", "err");
                    log("Please attach your dictionary file (e.g., rockyou.txt) in the upload zone.", "info");
                } else {
                    const file = fileInput.files[0];
                    log(`[LOAD] Reading ${file.name}...`);
                    
                    const reader = new FileReader();
                    reader.onload = async function(e) {
                        const content = e.target.result;
                        const lines = content.split(/\r?\n/);
                        log(`[INIT] ${lines.length} entries loaded. Processing...`);
                        
                        let count = 0;
                        let found = false;
                        for (let pwd of lines) {
                            if (!state.isRunning) break;
                            pwd = pwd.trim();
                            if (!pwd) continue;
                            
                            count++;
                            const res = state.algo === 'MD5' ? CryptoJS.MD5(pwd).toString() : CryptoJS.SHA256(pwd).toString();
                            
                            if (res === target) {
                                log(`[FOUND] Password: ${pwd}`, 'success');
                                found = true;
                                break;
                            }
                            
                            if (count % 5000 === 0) {
                                updateStats(count, start);
                                await new Promise(r => setTimeout(r, 0));
                            }
                        }
                        
                        if (!found && state.isRunning) log("[FAIL] Hash not found in wordlist.", "err");
                        stopSequence();
                    };
                    reader.readAsText(file);
                    return; // FileReader is async, stopSequence called inside onload
                }
            }
            stopSequence();
        }

        function stopSequence() {
            state.isRunning = false;
            document.getElementById('execBtn').innerText = "EXECUTE";
            setPulse(false);
        }

        function updateStats(c, s) {
            document.getElementById('statTested').innerText = `${c} Tested`;
            const seconds = (Date.now() - s) / 1000;
            const rate = seconds > 0 ? Math.round(c / seconds) : 0;
            document.getElementById('statSpeed').innerText = `${rate.toLocaleString()} H/s`;
        }

        function setPulse(on) {
            document.getElementById('statusLed').className = on ? "w-2 h-2 rounded-full bg-white animate-pulse" : "w-2 h-2 rounded-full bg-white/10";
            document.getElementById('statusText').innerText = on ? "Running" : "Idle";
        }

        function doHash() {
            const t = document.getElementById('rawText').value;
            document.getElementById('hashOutput').innerText = t ? (state.genAlgo === 'MD5' ? CryptoJS.MD5(t).toString() : CryptoJS.SHA256(t).toString()) : '---';
        }

        function copyHash() {
            const h = document.getElementById('hashOutput').innerText;
            if(h === '---') return;
            const textarea = document.createElement('textarea');
            textarea.value = h;
            document.body.appendChild(textarea);
            textarea.select();
            try {
                document.execCommand('copy');
                const notice = document.getElementById('copyNotice');
                notice.style.opacity = '1';
                setTimeout(() => notice.style.opacity = '0', 2000);
            } catch (err) {}
            document.body.removeChild(textarea);
        }
    </script>
</body>
</html>